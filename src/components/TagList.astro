---
import type { UnifiedPost } from "../types/post";

interface Props {
    posts: UnifiedPost[];
}

const { posts } = Astro.props as Props;

// ユニークなタグを抽出（posts[i].tags を見るだけ）
const tagSet = new Set<string>();
for (const post of posts) {
    for (const tag of post.tags ?? []) {
        tagSet.add(tag);
    }
}

// 表示順を安定させたいならソート
const tags = Array.from(tagSet).sort((a, b) => a.localeCompare(b, "ja"));
---

<div class="bg-gray-100 p-4 rounded-lg mb-8 shadow-sm">
    <h3 class="text-xl font-bold mb-3 border-b pb-2">タグ一覧</h3>
    <div class="flex flex-wrap gap-3">
        {tags.map((tag) => (
            <a
                href={`/blog/tags/${tag}`}
                class="bg-blue-100 text-blue-700 px-3 py-1 rounded-full hover:bg-blue-200 transition"
            >
                {tag}
            </a>
        ))}
    </div>
</div>
